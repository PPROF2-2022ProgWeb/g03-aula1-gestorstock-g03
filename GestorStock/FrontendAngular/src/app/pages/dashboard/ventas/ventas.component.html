<div class="container">
  <div id="stock" class="card">
    <div class="search-container">
      <search-bar
        #searchbar
        id="searchStock"
        name="search"
        [source]="productos"
        searchProperty="name"
        triggerOnInput
        placeholder="Busqueda por nombre de producto"
        (searchDone)="onSearchDone($event)"
      ></search-bar>
      <app-button
        square
        bordered
        [disabled]="!enableButton()"
        (onClick)="addToCart(productoStockSeleccionado)"
      >
        <span class="icono"> OK </span>
        <span class="text"> Agregar producto al carrito </span>
      </app-button>
    </div>
    <div
      #contenedorTabla
      class="table-container"
      [class.visible]="searchValue && searchResult.length > 0"
    >
      <data-table
        *ngIf="searchValue && searchResult.length > 0"
        #stock
        tableStyle="alternated bordered"
        [source]="searchResult"
        [columns]="stockColumns"
        [maxHeight]="300"
        (selectionChanged)="stockSelectionChanged($event)"
      ></data-table>
    </div>
    <app-aviso
      *ngIf="searchValue && searchResult.length === 0"
      titulo="No se encontraron productos"
      mensaje="El productos que buscas no fue encontrado"
    ></app-aviso>
  </div>
  <div id="cart" class="card">
    <data-table
      #cart
      [source]="productosCarrito"
      [columns]="cartColumns"
      tableStyle="bordered"
      [maxHeight]="600"
      (editionFinished)="cartEditionFinished($event)"
    ></data-table>

    <app-aviso
      *ngIf="productosCarrito.length === 0"
      titulo="Carrito vacio"
      mensaje="Agregue productos al carrito"
    ></app-aviso>

    <div class="actions" *ngIf="productosCarrito.length > 0">
      <app-button bordered square>Cambiar cantidad</app-button>
      <app-button
        bordered
        square
        [disabled]="!cart.selectedItem"
        (onClick)="eliminarDelCarrito(cart.selectedItem)"
      >
        Eliminar del carrito
      </app-button>
    </div>
  </div>
  <div id="total" class="card actions">
    <span>Total: {{ totalCarrito | currency }}</span>
    <app-button square bordered centered>Finalizar</app-button>
  </div>
</div>
